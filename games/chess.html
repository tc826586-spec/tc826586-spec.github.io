<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>2D Chess</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  margin:0;
  min-height:100vh;
  background:#020617;
  color:white;
  font-family:Arial;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
}

.board{
  display:grid;
  grid-template-columns:repeat(8,50px);
  width:400px;
  margin:auto;
}
.square{
  width:50px;
  height:50px;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:32px;
  cursor:pointer;
}
.light{background:#eee}
.dark{background:#555;color:white}

.hint{
  background:lime !important;
}
.selected{
  outline:3px solid yellow;
}

button{
  margin:6px;
  padding:8px 14px;
  border:none;
  border-radius:6px;
  background:#22d3ee;
  font-weight:bold;
}
</style>
</head>

<body>

<h2>Chess vs AI</h2>

<div id="board" class="board"></div>

<div id="status">Your move</div>

<button onclick="reset()">Restart</button>
<button onclick="location.href='../index.html'">Back</button>

<script>
document.addEventListener("DOMContentLoaded", () => {

const board = document.getElementById("board");
let selected = null;
let hints = [];

let pieces = [
"♜","♞","♝","♛","♚","♝","♞","♜",
"♟","♟","♟","♟","♟","♟","♟","♟",
"","","","","","","","",
"","","","","","","","",
"","","","","","","","",
"","","","","","","","",
"♙","♙","♙","♙","♙","♙","♙","♙",
"♖","♘","♗","♕","♔","♗","♘","♖"
];

function draw(){
  board.innerHTML="";
  pieces.forEach((p,i)=>{
    const s=document.createElement("div");
    s.className="square "+(((i+Math.floor(i/8))%2)?"dark":"light");
    if(i===selected)s.classList.add("selected");
    if(hints.includes(i))s.classList.add("hint");
    s.textContent=p;
    s.onclick=()=>click(i);
    board.appendChild(s);
  });
}

function click(i){
  if(selected===null && pieces[i]!==""){
    selected=i;
    showHints(i);
  }else if(hints.includes(i)){
    pieces[i]=pieces[selected];
    pieces[selected]="";
    selected=null;
    hints=[];
  }else{
    selected=null;
    hints=[];
  }
  draw();
}

function showHints(i){
  hints=[];
  let piece = pieces[i];
  let r = Math.floor(i/8);
  let c = i % 8;

  const inside = (x,y)=>x>=0 && x<8 && y>=0 && y<8;
  const idx = (x,y)=>x*8+y;

  // PAWN (WHITE)
  if(piece==="♙"){
    if(inside(r-1,c) && pieces[idx(r-1,c)]===""){
      hints.push(idx(r-1,c));
    }
  }

  // ROOK
  if(piece==="♖"||piece==="♜"){
    [[1,0],[-1,0],[0,1],[0,-1]].forEach(d=>{
      let x=r+d[0], y=c+d[1];
      while(inside(x,y)){
        if(pieces[idx(x,y)]===""){
          hints.push(idx(x,y));
        }else break;
        x+=d[0]; y+=d[1];
      }
    });
  }

  // BISHOP
  if(piece==="♗"||piece==="♝"){
    [[1,1],[1,-1],[-1,1],[-1,-1]].forEach(d=>{
      let x=r+d[0], y=c+d[1];
      while(inside(x,y)){
        if(pieces[idx(x,y)]===""){
          hints.push(idx(x,y));
        }else break;
        x+=d[0]; y+=d[1];
      }
    });
  }

  // QUEEN
  if(piece==="♕"||piece==="♛"){
    showHintsFor("rook");
    showHintsFor("bishop");
  }

  // KNIGHT
  if(piece==="♘"||piece==="♞"){
    [[2,1],[2,-1],[-2,1],[-2,-1],[1,2],[1,-2],[-1,2],[-1,-2]]
    .forEach(m=>{
      let x=r+m[0], y=c+m[1];
      if(inside(x,y)) hints.push(idx(x,y));
    });
  }

  // KING
  if(piece==="♔"||piece==="♚"){
    for(let dx=-1;dx<=1;dx++){
      for(let dy=-1;dy<=1;dy++){
        if(dx||dy){
          let x=r+dx,y=c+dy;
          if(inside(x,y)) hints.push(idx(x,y));
        }
      }
    }
  }

  function showHintsFor(type){
    if(type==="rook"){
      [[1,0],[-1,0],[0,1],[0,-1]].forEach(d=>{
        let x=r+d[0],y=c+d[1];
        while(inside(x,y)){
          if(pieces[idx(x,y)]==="")hints.push(idx(x,y));
          else break;
          x+=d[0];y+=d[1];
        }
      });
    }
    if(type==="bishop"){
      [[1,1],[1,-1],[-1,1],[-1,-1]].forEach(d=>{
        let x=r+d[0],y=c+d[1];
        while(inside(x,y)){
          if(pieces[idx(x,y)]==="")hints.push(idx(x,y));
          else break;
          x+=d[0];y+=d[1];
        }
      });
    }
  }
}

draw();
});
</script>

</body>
</html>
